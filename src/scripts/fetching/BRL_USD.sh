#!/bin/sh

TARGET=$2
MESSAGE_TITLE="Western Union Companion - By Victor Gutierrez ðŸŸ¢"
TARGET_CURRENCY="USD"

curl 'https://www.westernunion.com/wuconnect/prices/catalog' \
  -H 'authority: www.westernunion.com' \
  -H 'accept: */*' \
  -H 'accept-language: pt-BR,pt;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,es;q=0.5' \
  -H 'cache-control: no-cache' \
  -H 'content-type: text/plain;charset=UTF-8' \
  -H $'cookie: AKZip=; AKAreacode=; AKCounty=; WUCountryCookie_=BR; WULanguageCookie_=en; _evga_e61d=cd97f300195a1d7e.; _gcl_au=1.1.192269537.1671460584; A4kgk7nd=A3Zy0CqFAQAAHFrDWyyHi2-geoWY0CLWbQrqro2avfxhbolVwduPxYBQ7aMcAbUsdyGucgBSwH8AAEB3AAAAAA|1|1|30971075290669f09f7cab3e7720396f4e7076cf; s_ecid=MCMID%7C10527002012958908521997717894336953425; affiliate_src_code=; __qca=P0-1709286564-1671460584261; fp_token_7c6a6574-f011-4c9a-abdd-9894a102ccef=LMgsJRcfyMg7FunMOmfpI6X7duB2Acn9POKakafZbqk=; QuantumMetricUserID=fd6f2bb6039af967626dfd35a3ba712a; lastCountry=AR; lastCurrency=ARS; lastFundsIn=WUPay; userIdentity=existingCustomer; user_txn_state=2:1671629693746; lastFundsOut=BA; abandonedCartToken=10befe9f167f8d8ce9b5c3fc7891d424; __ssid=9609348f42f15f82481811bbadb31bc; AKCountry=BR; AKRegioncode=SP; AKCity=OSASCO; AK_TLS_Version=tls1.2; AKA_A2=A; resolution_height=600; resolution_width=800; is_tablet=false; is_mobile=false; bm_sz=1D5699BB57FE29842117A06E3B6A5DFC~YAAQLNXaF2bIzhiFAQAAlxK/ThLYx3vk3AZsgIIvbcwJcWPXfGbAfhz6eNN/l81iffam2KfOAQhLuDHJdzGESE9im+/zWtON4eCzN7/h5tASCwp1iQt7u3HHU0e6DNnr5P98nv1Flucrci4SOSazwP2LmwnKcZ+lv2n3mXzVhut6EGZdoIsL5uul0hG8pE4eD9fWIKWegXsh6RXg8X3QYZY3XRN/uatCe9erdhSjIcPQ7k4vCC14m+pF3fIINGWlGMorAHc1AT5/9dgjqgqWtuh6mf0K8AzafGmJSY/vgB0QlAFjc2EY3fM=~4604210~4471105; _abck=39232BA13024CCE59B1FDDC26B4FDA09~0~YAAQLNXaF/nIzhiFAQAAsRe/Tgl/+RLPEbU8uZfxbLJ0gnu0Wk7B4Y4+ecgA7AmfnR3+jqPXh09eh9SXsXs88fQMImB/Sef4DcWpoBVX7XTg04JlQwY2rAd5grW1AoikTKFq5RpBTooKHAvZwCrJAE4opM+TvbKGsL7zRR4UNvsVHhXfW5zlSlej0naE90/Vy9wSUFAKvmsDUd1VSNQJHkMj0ul+4RteyHOOyW1QJ2LG/CZUVhiJL0yjg7jd6a55+sK1RBm975pxGfl+8fjA2LHcUr+AktbAgxqwk7xmCLo8zXxmOl9ICjtC+njnfckLUeGrhd7eTaHZrLIpZarNsH4Iv+WaF/AXTTHjOb0c7uSp47Nnb6F3GqnKdVasZm/FA+HqBff3eushFO7R39A3dqFqC1obKK5rkFh7ZAGLUw==~-1~-1~1672066930; wu_device_id=3dcd40d4-9ebe-9597-3131-db6ab5323223; utm_source=web-bookmark-or-typed; utm_medium=e-web-bookmark-or-typed; utm_campaign=organic-web-bookmark-or-typed; visit-logged-amp=true; AMCVS_AACD3BC75245B4940A490D4D%40AdobeOrg=1; channel_stack=home; s_cc=true; AMCV_AACD3BC75245B4940A490D4D%40AdobeOrg=1176715910%7CMCIDTS%7C19353%7CMCMID%7C10527002012958908521997717894336953425%7CMCAID%7CNONE%7CMCOPTOUT-1672070626s%7CNONE%7CMCAAMLH-1672668226%7C4%7CMCAAMB-1672668226%7Cj8Odv6LonN4r3an7LhD3WZrU1bUpAkFkkiY1ncBR96t2PTI%7CMCSYNCSOP%7C411-19360%7CvVersion%7C5.4.0; bm_mi=4B446682B2822EF41595076768388198~YAAQLNXaFyTPzhiFAQAAg1a/ThI53/Kl0vDCYOENhZZkv1ItTxozkRm2N/KBSwjtQfaJJyU/CXKvwiSHYW6z30bi7P9J5I5Mqzbol4JGW1cDL03nYR5Ui3OtpK189IhvKljlMdGTZy2g1s3f3H0WPzAyE7nuzvOuvjgKop0LX6UfMnisafrbpl+lAm9jimm9+kmOCmm4wghEynasU+rS82E3Ksil2ou/laoU09UE6z+v1m3fxzv2siI6nhdOCxtb2MzUhDW1NkQRJRQHAMzlzNRc4DZyfIVyDBas8bPLa6dQWFlarEI3IFKcbN3nfC8wRy9kQ7n33OdKh3tI7bllOyIScA==~1; ak_bmsc=1BCC4D025F98E38A1B44374582BA8949~000000000000000000000000000000~YAAQLNXaFw/QzhiFAQAASGC/ThLDsXD9Psdmx3yUqluDZQ1rLMo0d8sVCs2UDtQ0railR6BJl63VKlQbpss7tvPuw2mXdQximLHCY2Hfe/hoRmefqkFNuj0ch1eEnb5ILsSbDY8gQzNql8J5CQ4pkDOyAEGteKnQ/pK/H3L3RO+UlDOat3LNwxMLUlkaLFbQmFT0wu7rEtRJmwqyNBxA91VQxtaRMfsjbHqz/7ruNoFHrU1PSBptZ2aOGP85IDa+VQoKyGyCRsV9sPZbErged5aedwz4hU6XmZWBK2J6D0NDUSmcgAqy844IChYrTWBazu8b2v4m6ZuakdJr4CLa4H2yesDx5bTPkVb2boyg0d/9MAcRmJybov2TdYR04zGNGQ8QK8GWntZKiqznDcRsluauo1BzBuEB8jwfsw7O71P0kjSMJwiEs8nVUt4KogEd; A4kgk7nd_dc=%7B%22c%22%3A%20%22dW9YZEMxYUZiV0o1UFBqSQ%3D%3D1N3YPqmwOkp-vX3obTia5tA6zMDQWSCpsVgWbfOWHSsKNUGy8zshHcZTjfUjyaSyVgfexoqoyDy82kLVItBrMgAe6MTcVPu8FL8pLvsziw%3D%3D%22%2C%20%22dc%22%3A%200%2C%20%22mf%22%3A%201%7D; amplitude_id_7d40b1ccdea38ded011affb5946a3ddd_project-leap-qawesternunion.com=eyJkZXZpY2VJZCI6Ijc0MjYzMzFjLTJiMjctNDRmMi1hMWQxLTc1NGNhNjcxZTU5OFIiLCJ1c2VySWQiOm51bGwsIm9wdE91dCI6ZmFsc2UsInNlc3Npb25JZCI6MTY3MjA2MzQyNTk5NSwibGFzdEV2ZW50VGltZSI6MTY3MjA2MzQ0MjYxMCwiZXZlbnRJZCI6MTIsImlkZW50aWZ5SWQiOjYwLCJzZXF1ZW5jZU51bWJlciI6NzJ9; s_plt=2.48; s_pltp=br%3Aen%3Awebsite%3Ahome; amplitude_id_4aec879ef8bf1823486c4338537ec441westernunion.com=eyJkZXZpY2VJZCI6IjNkY2Q0MGQ0LTllYmUtOTU5Ny0zMTMxLWRiNmFiNTMyMzIyMyIsInVzZXJJZCI6IjMxMzg2NzQ5NmRmNzc3ZWZlNDNjZDM1MjBiMmIzMmYxIiwib3B0T3V0IjpmYWxzZSwic2Vzc2lvbklkIjoxNjcyMDYzNDI1NTcyLCJsYXN0RXZlbnRUaW1lIjoxNjcyMDYzNDQzMDk2LCJldmVudElkIjoxMTYsImlkZW50aWZ5SWQiOjczLCJzZXF1ZW5jZU51bWJlciI6MTg5fQ==; RT="z=1&dm=www.westernunion.com&si=f615b927-54e4-4590-92a5-457baa9d3ec4&ss=lc4ve1jf&sl=2&tt=4j7&bcn=%2F%2F17de4c18.akstat.io%2F&ld=g9k"; dtCookie=v_4_srv_2_sn_7BE63E5B169AF3E9D3EF67C4A08C3A12_perc_100000_ol_0_mul_1_app-3A4f296d341a47bdba_0; BIGipServerwudispatcher.westernunion.com=\u0021QXTyvfz5tEC4JeU9v++QYZNsXLq+H0eCf4KpKeHuwIdUr6v1/8a/gQm5E2gUCvX1Egky+qxYNJd8sw==; bm_sv=3184549FA4FE3C2D08684DE2F8365467~YAAQLNXaF2vbzhiFAQAAjPi/ThLoAD/wKA+oLk8CJkAaaWOb45nbty2C66I4lbYE1qjJjzhGhctkwDk4e4J3SxgYxZffxkrMMMdvl198X0NqhKhsMPD7AE0PKJgMtTrfd1EBL2tOm72Y8+aZdfvqUqZsfWGcsEZIBK+R4rkPIdnWskbz+QPssoO2gk2AYH554hP1cMDGuli4GeokABG1qo5GJBWeHn5i40Do1KRtbYFrpCY2naFT+JbOcU/xzf9omQ7CfpQ7cw==~1; _dd_s=logs=1&id=8197ed4b-be7e-4f92-85fa-5ad0ddccc363&created=1672063422163&expire=1672064385284; s_NewRepeateVar=1672063485309-Repeat; s_NewRepeatprop=1672063485310-Repeat' \
  -H 'origin: https://www.westernunion.com' \
  -H 'pragma: no-cache' \
  -H 'referer: https://www.westernunion.com/br/en/home.html' \
  -H 'sec-ch-ua: "Not?A_Brand";v="8", "Chromium";v="108", "Microsoft Edge";v="108"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "Windows"' \
  -H 'sec-fetch-dest: empty' \
  -H 'sec-fetch-mode: cors' \
  -H 'sec-fetch-site: same-origin' \
  -H 'user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36 Edg/108.0.1462.54' \
  -H 'x-nyupe9cs-a: 59FLuFL3ZIIcYxb0-S1BmK-2qrCcJ5coxKDqSb3loI0FFIca1aPGpr=4nF-VtJ0d8bFehFZDOy3D1S07doiYxm1nWmEzvB=tu3765gZZMvonTLh6bmSDt2_22yDH1k-BtjH1RLLbeU7gbtab6Sh6260x9sxr_d61Q3RqGFb=mCiuMaRBp0N8BGOUHALKl3tYO=BHLkHz2LWf7HUFK9gn6PP6O-NTv2vc_3t_eEYdjLtgAnBpuam41pPImGDQlTn6zL=5wSPEy4GxWvG1mbME=sgiclYzdkz5N=N8mj0Jj-tpqHQuuI1vTh21BZC1Sk8g43CjWmQu_2fTxERc3A-EJmQs=oNCL_IsBxL_rMmgVWM=rEcm=aR6jEdVyWzvvRNC6zgUaKyIdRu39Y9ptzeRfP3CChrcQ6sTPUNe5O-pd7ViDL3c0CqUbpQ_nB5gKHClJVVGLVPu_TimW-hEvNal-_=D34hfnYaZw=Nk_Vhi3pbEZqfciuTBYdTiIB7bVfARlOYB8NdR35FlxgNU6CnO63fNWOh2FUz9tSrEd8aG9P1yABwWFjCV8_96tCUxdWxa12VyRhvRnehPNWbRPbKBm4sFfZFPjtNIEf=mnY0CkrHU_RpLZhCVmpNb0bt-BQL1SLWbEldBDfqLpeoHugV3h16fEq=Hn_gjaokTGB_M_eb28krdYm6sf2CuoNPeH6bO3_3jI93xZnwt7U9pPPB0DzlzVcNQKh-to6nSwH43oqc=t9m=VBKknkvG7kiYJKWPBMrYQAiIWhyNN3i1BQB_U_YvZiKLRCsPqazcOEVilvF=vwpZjbtlRt-mqW3Olla-GkvsI0twlsv=rzhYyMymRReR=n8BLC6oHzE3NiCOBkGVZ3S_QwsxjxqNGuwMtsRtu_qtd0jbLqc_RRRTzQ2wcccjCjqEfVGaclT3Yk2feWAGop98RsyVKpxolgY2qEz8YzQG5x9HbHErWqIqqD22ROedwDmp=TzRIeNU=u4LSHZSYm5csrUJ7IvvfrHOryItU94=CWOiQ39o=Rqqum39=4H277bM6KgSnFT8fq0hfGy-Urws2P5ir1K3ieYVM_b7NUaYJlmCTUQVKz1TZHUkFWUO5rdwcTq=WsEuZo7ajyJQ1-k4qtjs36HBA5jzBln3cS-iEk-tKqgVuVKYuMNATF=s0PWhb2YwWK3dOSGzKExnd9Sij2grARefIM0SorYSstoNtBK=Z1vVVJPbyL6Nan1yu60SOBtDylPy2JkJ_cfjk9idcsq4wCcc04VTMRhPoAxKajKLA5WC6Y503tLN3Z5m7o-G8Bz4ULUxEfzn8RWA-8ynGhtdRHL6zAGUjHi1rvjxH8vTnO1GoYvFjQG4cOHuWZTn6Go-t1p6R_pri0uKFwQ8rtJ2i06kYpaZlMZ-BTkKUE=ZgC6QCJo=aGg649eBspmxAh80EkPw9ZMIpw8MWiRS3rSWv-NdlaI1hbsPZgvYZ5dokVLzFD2wbndN83bjv6DzoUNthdlPNU4r78RfFSm9Qcm=tBOPcnRz3NURyYU1wZhnqMk9orGmQZgkVlFICRYZyarr5e7f7otmkbwvan0Jtyqi4oMKc8V0YL_JSRKPq7=pZn3JDi_6KY=R6pZmxUParyiczTLsYOuMwJP1gCvF0UUcb3In3HYZ6e9uda_uGALzDyWF5uiA4Kc7xYwr2ggqgksFxcAPIzzoKh76AvAlr6BAfwKU0nn_sDr_WEx9_FhyPYso8zNzt0JgubohJ4kY4wThhEh3nP-HCsFELrKJgOD0pLQc1f=j8H_MJaTDnL88ThEslrUZARPDP-7==DG1Ze3pGK4NL1IptC-rhRHnApIHxws8FAUvl8ggKPPnmpNNjR=tCZ7A5jZnVnyl3Zihfd=UWzVMzUwM-lmKG9DggMVJiv79W45S3PsYlSqIAw2pR7oQobQD44T4oBg1J4_DHiag=nF0nz7H2jCoby4I8YH_2yaYhmpv1ThwIGDGZB5SsvczMqJIBHiiZ6ZKbfpzIGdJ9f3Ex-dJ0BhKERrPQ_Ty3hn5wbAIECeLsWiLVVjz8MGOBufKuirQy38JQPD7p42OcjFrnE_19owfnLAKwgciLemkSDmGf1D5eMuSy=cR3qR31PeqLFl2cEkW2RnuWGJooqY05QrgbknHgj7Akj9Sy7YIse_FDicZ8h4ZFMqCW6WexP30IM-DKlFBWCxWgDrhPrsDcyHgilpiCem=i390zZ1L6_DDSy=4Vpyp0W7ve_3YGx2vTBP8BOUTNqEckZKt=yLpf=lNWOYUESyW3hwnHesHwJ1jLUCDCPenOpM8lF0=B_S8AdTFNAwnz-cFrjOhT_G-hOOniC4L9Tik1PH-CZ6eYdxJxImCQoMeJ8D7EzJU9dv_vUOGGpRl0pMgWTirgiitFgm3hm-Vfu1i7miFpdlElHOfFqwimNRyK_RU5PmQzkl8p-Wl6r5d--GJymqgNnv2vPrJGxNr2PDH7xpsA9r3lT=9bx-61U1JRhVn9w_H6AqJocCbVTVQgoSVIfcuuz=or7T0_157DRigYMSJsLf0CS2mQEZuCmhjKm_K7VpxYWT-=IDTswWjjHSKMf8diuoZpq3gFTK24=EMhdr7sFncN_gRPp4nzboWl-hrfLhIpGylMEmGloUFGbewBs=VsVPztaGDN_U0U-VM4w7IaKAKUK3LSVzcjakx0jutlGk_cL5Y1_2AjrClGqkOb5gmRQmVacEe45we6t4m56PqThk31vF-hRGlyJMCKK7taFHIhGo6xQs=_SEWE1MgmNmIH5Yxn03BDgYIh8HdUFSnEWk7eww99IISI6j=YNFcHovdf3kzrwy0P-FY8JpGdJjgMsz2EqcuI6BgEm5zSC4U-1mtn0Ye1vkInOf075Vdvnq8HgoRtT3W9EcbW1OtPR7s8xQuj0txKqvTqUEfsh=VuRgbGKtzaP5xpT6qrgEWKQlx21IYhl4O8Jz-Ivjn4wrmd-VkTggaZOdiA77Z0y_QS_RIGvunfkjBiQRAITSVtP=OSLH=StM=35lTP8733T1W=0DSRMZ8JCQULTWnfdpZxwrSvmdlTe199zIQLdpkz1dONZOPlYmU5MjCQNGUfLghOVcKHCM79ySdC1IWjp18VkPTOk19pNMkJ6D_zuINYo-eczxEyhAbaW3xkJ0aZeEn6P_T_sxvYDTbBUBsOkiZBMzCIw0EZkLM7EY089H21=4WjuuPAIGL15zRbdujAVjEsPvuL9QLMG5syJfKC2e2OnsIRsKZwLT1muMzjEO4C3I494eGsGVhPnvS6lnohv8=C-3NUbbCFtAKgujPx3bDMIRzyBiaHxdtjdQoHIrIe-gJdzQE8CqWISWr_MqCayWWURvGIAlmY7B=Tr1a9mgc535KS-yaFpdvg2Z7jfmk__SQ6BNvTQr2k10EvTTiB=w7qf3=Unxuh=K1IpQzKPfxIUC88NwmvTAsJJebuDUOoSlG8dJJ_cmVhkFuuthDQm1mRLBC2=MrogwT1jZ-Ys7iZ5hy5Qp5y0JDw-93ouM1232Y2U-EmSb_d8varP1HqkQS2Yvs3vnwYOk3OhThcoQzcd5aJSU0u46WLuMBOdPtbYyUEp6-Bq0xUZ2knP2hsP19E6ipUjAiLjuKTZOrTyJSCmfKZ_QLTp65etJ0q4NRCtrJY3u0vDS=6ODi6CvDuC-P=gYxSu5qr3vwRI2MmuAUvee=BFivmNPVTa8GfMg0i=O6duI-r28lgTMRf98ibByo8UnYEZ4t6bUVxWg=Fu5P8ndTBnzY_pEghboi30by6z2mTtT6Rw3cK3mi1ezsqnQHZbsqIBWzdOZP0ZB6F3j79uDlE47zKFty2hvwTTc2Y8MWpE32BIdMqcMbMFdR6Sd_ko6bFufh0trz-eAsawn7rVYBHZdU_wxs=UD=NLExAG6y2n5fBhbS=fyWkP5Y=KVGPMrljQmguGKtcaP42ClGB07PfRI223oJyVHg95L-HgrC0Y3YO77SUHnTJHofn8zh2Ft1jMynJP7Rzf9=13S4rdYPAuCptHNi4rA-1VBI4rHAWei2QH=qMg2myPJscaZfx8usekhQl0M_Q_1HN9oKfflNq0qU_a0EECgOw1rnps=Io7c_24y1hrBtPYvksUqkJnANxYuuauVad1FP5uVds4eFQEkmR=gM38tV8A1W5xq4aven8mnoMnpr2sohrDjDFspMrNd9swGL_auiOwA=TuchLRyMyOQjcTMCuU9pMhz5CLYjnh3n1IR1NmSS5qceKtB_=kU7m-xSZ4BESM2zoVqSa-PIFVn82c3dr4vauBQE-d1pFd2Wy2j6-ocMVJnrrDlhJ6YTG0gV4O-UmmCnkvnAxGemPokFWi4RwKDwKtf=we5E2g=O2YnGvSZ-shJqt3VpYRvjeLZtm66pE4D0NoMkVyKyt=_=2qIpbljYtK0NbYbPHlCktuF3fiqVBeyi1jL1ZigZH8VTfiUDeYjZii0qRA8RdYgGPPuK4pLq-w24o5b80t8UWj=rOqw_LY6OYIxYbwaVSWx3uoBcm2ujj6ne7IAIJYm-pe1_W_KwAx1BPOFmPY1kmaNSVcAPGcSQmktuM7Lx4NYZyVqLp__=42F3=LeoJ-1oubhuzZ7rqZneFaGPIw2jpyqDLElLPPdp3zq1LCdesM=rmlUbS_g05egFKkuihU-crgRGxAkTjr17THzebgUCaGFsvaqzuBpIg1YbNA-kyxm01IJ0tRLiH2sjZgEBKPu48jZLZ18Njy0dP5VbgkJYWBxfxAgRUab4E99O5P4P8TY4=iMSvAzwZ2kjH=WEt9mk7kvQZYIqcJBr8kAxHzl-hz=mIdk=KAhuQSuV-8vKKEheKSzDkdEqwtFQ5etggv-amU0Jt=Tu3on26u7M1ex-t=sW8w-Fg01_OOSe-7wBS2aVq61xprKCOLib3fiCYVHO1zfaVHbNoLFn43Ylj9o1v6O2kWHFCDmjT6_Y12G26nDa78yxuWEz__OpIsiWsimO759jDLNmYoInD63HSoaTD=3CLWZvY8iVW1Oix16B-I_R_i4VeDj6h1Lx2dm5RVw9T1IfoETvmVW8agKQ7bPSm1y-z73UIeTl3Uw6tz0j_VNWrdtO2iatiYaB6wAQQNy_P6nNhHFzCeWul1mld1gvLTay5oz7y4LMaBh==TAwwSE3QzG_E=-tPihCQ5iLqK=5koxkuWJMt40E4e1j4j5uTvafUmK6IiJrjMEZdf0kA_RsW8hLxtdCeUMDMrkCt9SopLc=v4W_D3M3H1swHD1LcP1wOF3ZT5U=5K9NagNxixi369t' \
  -H 'x-nyupe9cs-b: kucth1' \
  -H 'x-nyupe9cs-c: AACru06FAQAALUfR9w2ECnIHYLcG0q2_RF5fWwA0PHHPKjpONQuhsOUrGvpC' \
  -H 'x-nyupe9cs-d: ABaChIjBDKGNgUGAQZIQhISi0eIAtJmBDgALobDlKxr6Qv_____JSxVAAHFA14_YrR3Wg2rHVJuH-Vk' \
  -H 'x-nyupe9cs-f: A29Xv06FAQAA4HVRJOtosJOwXyrRqKkOAK786-0RQ9qVN9swsGykAMbYSHbBAb-3KD6ucgBSwH8AAEB3AAAAAA==' \
  -H 'x-nyupe9cs-z: q' \
  --data-raw '{"header_request":{"version":"0.5","request_type":"PRICECATALOG"},"sender":{"client":"WUCOM","channel":"WWEB","funds_in":"EB","curr_iso3":"BRL","cty_iso2_ext":"BR","send_amount":"100.00"},"receiver":{"curr_iso3":"USD","cty_iso2_ext":"US","cty_iso2":"US"}}' \
  --compressed \
  --progress-bar | grep -o '"fx_rate":[[:digit:]]....' | tr -d 'fx_rate:' | tr -d '"' | {

  read WUCURRENCYVALUE

  if test -z "$WUCURRENCYVALUE"; then
    echo "Current currency ($WUCURRENCYVALUE) value is missing, message was not sent and data procedures were not triggered."
    exit 111
  else
    echo "Sending message to target $TARGET"

    ### Storage
    if [[ ! -e "src/databases/$TARGET_CURRENCY.csv" ]]; then
      touch "src/databases/$TARGET_CURRENCY.csv"
      echo "BASE_BRL;PRICE_$TARGET_CURRENCY;DATE" >>"src/databases/$TARGET_CURRENCY.csv"
    fi

    echo "1 BRL; $WUCURRENCYVALUE; $(date "+%d-%m-%Y %T")" >>"src/databases/$TARGET_CURRENCY.csv"
    ### Storage

    curl "ntfy.sh/$TARGET" \
      -H "X-Title: $MESSAGE_TITLE" \
      -H "X-Priority: 5" \
      -H "Actions: view, Ir para a Western Union, https://www.westernunion.com/br/en/home.html" \
      -d "[$TARGET] 1 BRL = $WUCURRENCYVALUE $TARGET_CURRENCY" \
      --progress-bar

    # Data Analysis
    echo "Sending data to data scripts with $TARGET_CURRENCY parameter"
    python3 -u "src/data_scripts/plot_csv_charts.py" "BRL_$TARGET_CURRENCY" "$TARGET_CURRENCY"
    # Data Analysis
  fi
}

exit 0
