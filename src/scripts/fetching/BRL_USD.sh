#!/bin/sh

TARGET=$2
MESSAGE_TITLE="Western Union Companion - By Victor Gutierrez ðŸŸ¢"
TARGET_CURRENCY="USD"

curl 'https://www.westernunion.com/wuconnect/prices/catalog' \
  -H 'authority: www.westernunion.com' \
  -H 'accept: */*' \
  -H 'accept-language: pt-BR,pt;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,es;q=0.5' \
  -H 'cache-control: no-cache' \
  -H 'content-type: text/plain;charset=UTF-8' \
  -H $'cookie: AKZip=; AKAreacode=; AKCounty=; WUCountryCookie_=BR; WULanguageCookie_=en; _evga_e61d=cd97f300195a1d7e.; _gcl_au=1.1.192269537.1671460584; A4kgk7nd=A3Zy0CqFAQAAHFrDWyyHi2-geoWY0CLWbQrqro2avfxhbolVwduPxYBQ7aMcAbUsdyGucgBSwH8AAEB3AAAAAA|1|1|30971075290669f09f7cab3e7720396f4e7076cf; s_ecid=MCMID%7C10527002012958908521997717894336953425; affiliate_src_code=; __qca=P0-1709286564-1671460584261; fp_token_7c6a6574-f011-4c9a-abdd-9894a102ccef=LMgsJRcfyMg7FunMOmfpI6X7duB2Acn9POKakafZbqk=; QuantumMetricUserID=fd6f2bb6039af967626dfd35a3ba712a; lastCountry=AR; lastCurrency=ARS; lastFundsIn=WUPay; userIdentity=existingCustomer; user_txn_state=2:1671629693746; lastFundsOut=BA; abandonedCartToken=10befe9f167f8d8ce9b5c3fc7891d424; __ssid=9609348f42f15f82481811bbadb31bc; AKCountry=BR; AKRegioncode=AM; AKCity=MANAUS; AK_TLS_Version=tls1.2; resolution_height=600; resolution_width=800; is_tablet=false; is_mobile=false; AK_SID=dGVzdGluZ3Yxed; AKA_A2=A; bm_sz=0427D8F4CA1C1166CB7804B6B4BBE17B~YAAQDY5ivp1afPCEAQAAyeLZfBLHs/zX6kvTfm/Lh5Y5fO1GYI7FFxSpiAFzE+ZSe9J6697oIbR01eOXC9FCSegacHoFzxxjVspwkzn7oZ/LG2qLzQm3a2LkQRAc9y73FiR8Sf54Sip8clx1n2CujdkYWSCbMB7Fhj1cxvZYz/JZbzMKwRZVJ+GYAJhM/DQn4u80FlaZUXtfrg0lOc5Uai/1oms3ngCdg0o5FDyklHSSXVnpmXbWefWs2j5oYRu6u3srtKqBceqIsQPHKTVS8vN0kB4SCP+Sto4qfF1NuZZQbmVFRxuBuLw=~4343107~3223862; _abck=39232BA13024CCE59B1FDDC26B4FDA09~0~YAAQDY5ivrxafPCEAQAAgu3ZfAma0Str39JhgVkpUjOvbbXNThs2VaG1a9BE33A7fs1gGnHZ6Adpc4ejM2bb6TN5KSQN/rUHw0ifBVUFxCkoyz1dz3fL+/DfEpd1ICyaYfm7bYUTXKa38lm3Rwh5YMb8Bw+egj/p4kxJYLUPs5WtBLNiIcMMzO/MqoXP39Ez81YE/z3AAY3qdy+PSH18SfGnNRpEXaKteQOYBxdGdYnBUv/jiIUFCN0LGW+UoQhcZXfahzsZ1Vt2BD2ONKVE717z/o8ceIumagHjLhGTdLiSv3lOUZC8iE6PUlrkZGNoQeqKplPw9PAkeKXf+30VcO+G27BtWG9viLhL26DUc5p3hwBeG+P/0Ue1Y0+VgEuwe6rtMZM4LcypsKrvlPWszmiUEgMce6gaUvkoDohm0A==~-1~-1~1672840517; bm_mi=ECFF1DD94CE4D48995FE8D404FF3896D~YAAQDY5ivr9afPCEAQAAwe7ZfBIztCY/hR8e+bABBBXiaPc6vWXoJw14Y1SDZGDLQVq7jXGLw8tKsMQOZ9S2oVfKvqRQdcSgnwN4g9fzn4SVSIeRtURy0wFo8JhwItVAaHPl1H44byVQ/dJm7mVJMQYgW2sa95h28pgnfu0xNFwydvrP0yPfL3XxgTjM4tff5OUmP0Ii1I/VMAOPZATm4zOj3v2jiEWWKXBpjL1rf1l1H//o/1de2iJicrWFLItAZ8HjQVP2BxogR/B+sSm7ZhHkDr0j3HzOKsLw3Xq29SbQZpm7b4CQlHouCSsK7/nRZ0qPH4aYX+7VCc2HOIdSWy7aoCF1dwPFDDBo8AuU9foQRqW0hGT1hJnnCDJLzBY2tiw=~1; ak_bmsc=8711941DE52C49F8631565206CC44941~000000000000000000000000000000~YAAQDY5ivtRafPCEAQAA+vPZfBLDYwHLK9/Ip2but9CjlLyKKQqkMqUEIqg5SRY31t6tfPvMRTNe7YWVqkBGAcQ4jCOw+rcQPAITChPrnkm53W0vn0yVn4KtnOg+kFy41fTfP5JtzFGMiSEZpRpfn42mNIiB1mdeboAAW3dQ8tV4RjIEEnom2BSKbOAftK1Xq+gp5qJ7EYwk/4WnNrfLkef3USTcMdTN29sx48R1Syb2aWT17axWO8i96bCWYiXSVi69Ogq1JZ6jjSgzoX5Px+1qLjaNYD8z5WTFp2GkWk6CdJ2fHb8DrRi+NZo8TDy8djhzDxMxt/1UIfEAsdIB6+7lzRh1ZbO46yWiTzNZS1qBWUODtzVEYSF85id55aFFqqdelWJR2imE3eRcZwX536IrRHnNE+ZY8gRX/x6mEgieeBxD7JjvQwzb4A+/wTNbv8nUh+q+jkookxVQq8pgPR3eU5Hi8vflJ8xl9pJAMsRwAReML1cYNiO4mLSBNcf9h9VkEmYXANcd5Uozw7o6Rl9wh9fuO5qpK9GB7DtD7jPhuiQEDplxg6Ltdzj4OHd3V9RdztE=; wu_device_id=9b1c1335-112b-e0f3-b114-263953483126; AMCVS_AACD3BC75245B4940A490D4D%40AdobeOrg=1; AMCV_AACD3BC75245B4940A490D4D%40AdobeOrg=1176715910%7CMCIDTS%7C19362%7CMCMID%7C10527002012958908521997717894336953425%7CMCAID%7CNONE%7CMCOPTOUT-1672844138s%7CNONE%7CMCAAMLH-1673441738%7C4%7CMCAAMB-1673441738%7Cj8Odv6LonN4r3an7LhD3WZrU1bUpAkFkkiY1ncBR96t2PTI%7CMCSYNCSOP%7C411-19367%7CvVersion%7C5.4.0; channel_stack=home; s_cc=true; utm_source=web-bookmark-or-typed; utm_medium=e-web-bookmark-or-typed; utm_campaign=organic-web-bookmark-or-typed; visit-logged-amp=true; A4kgk7nd_dc=%7B%22c%22%3A%20%22R0w5MWZpZFlxeVRvaE9xMg%3D%3D3R1dSEbRQiEa9Ng8-SJvrXCEQ-Y_5rckLkbCMCM8Y8XdQCvTqnhcjvyb8SSGlo8tvCoWy0Z1IqcM_opMl2wLP0cyqfSRUJ0rmG21ue7WAw%3D%3D%22%2C%20%22dc%22%3A%201%2C%20%22mf%22%3A%201%7D; RT="z=1&dm=www.westernunion.com&si=f615b927-54e4-4590-92a5-457baa9d3ec4&ss=lchnx1jj&sl=2&tt=5wo&bcn=%2F%2F17de4c20.akstat.io%2F&ld=csl"; amplitude_id_7d40b1ccdea38ded011affb5946a3ddd_project-leap-qawesternunion.com=eyJkZXZpY2VJZCI6Ijc0MjYzMzFjLTJiMjctNDRmMi1hMWQxLTc1NGNhNjcxZTU5OFIiLCJ1c2VySWQiOm51bGwsIm9wdE91dCI6ZmFsc2UsInNlc3Npb25JZCI6MTY3MjgzNjkzODI5MCwibGFzdEV2ZW50VGltZSI6MTY3MjgzNjk0OTQ0MCwiZXZlbnRJZCI6MjcsImlkZW50aWZ5SWQiOjc1LCJzZXF1ZW5jZU51bWJlciI6MTAyfQ==; amplitude_id_4aec879ef8bf1823486c4338537ec441westernunion.com=eyJkZXZpY2VJZCI6IjliMWMxMzM1LTExMmItZTBmMy1iMTE0LTI2Mzk1MzQ4MzEyNiIsInVzZXJJZCI6IjMxMzg2NzQ5NmRmNzc3ZWZlNDNjZDM1MjBiMmIzMmYxIiwib3B0T3V0IjpmYWxzZSwic2Vzc2lvbklkIjoxNjcyODM2OTM3ODkzLCJsYXN0RXZlbnRUaW1lIjoxNjcyODM2OTQ5NDQ5LCJldmVudElkIjoxNTIsImlkZW50aWZ5SWQiOjEwOSwic2VxdWVuY2VOdW1iZXIiOjI2MX0=; s_plt=2.45; s_pltp=br%3Aen%3Awebsite%3Ahome; dtCookie=v_4_srv_3_sn_A10CD0F4908A2FA38878CE793C77AB23_perc_100000_ol_0_mul_1_app-3A4f296d341a47bdba_0; BIGipServerwudispatcher.westernunion.com=\u0021UJSB7SUDbeimoyP8CfygQNRcFY4Jxsds8+t56pEAoIfV0KXf4HROj7Zq/EvuPEfCz+qlZn3eXGR2tw==; bm_sv=B5EDD26C4BF2B437795293C42115B511~YAAQDY5ivnlbfPCEAQAAOSjafBIbVO9gz8R7ZgEhoX538mY3miYFHbMNZZKwhF+V0vf/M1cKylMwb5LH0AIlPML8AsuajTRe0Hr/ATijm4u/eFMZTY+W+O6l8e4GPEKizZX4sKtONy6EvAN5TtMRPYJ7gfNA1KnSf4PlTBOCUgCam3sTKiC+HTtc4xFn8c5DMwP/Yqx9TcSxgKMbi0iX95xHworaH6A9w4WkPZ3DQKCbHl58XdKBAP+0HRpw2VfoXfVfxAqXiQ==~1; _dd_s=logs=1&id=49c4b684-0e8e-4d96-a8a2-96b139685c22&created=1672836932635&expire=1672837926486; s_NewRepeateVar=1672837026505-Repeat; s_NewRepeatprop=1672837026506-Repeat' \
  -H 'origin: https://www.westernunion.com' \
  -H 'pragma: no-cache' \
  -H 'referer: https://www.westernunion.com/br/en/home.html' \
  -H 'sec-ch-ua: "Not?A_Brand";v="8", "Chromium";v="108", "Microsoft Edge";v="108"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "Windows"' \
  -H 'sec-fetch-dest: empty' \
  -H 'sec-fetch-mode: cors' \
  -H 'sec-fetch-site: same-origin' \
  -H 'user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36 Edg/108.0.1462.54' \
  -H 'x-nyupe9cs-a: t2wuH=Yahte5gVXjY9VxorUpwYcB9toTx0fsM76pCm8yBHMcKrN-Z_rDkrqC9NdQXTSJVQCMqCN2Cv=sKSALY2WjDAjUBKt7rAKHwR1Ns1irRmRyjjsVu=OVDxBt4zkAONqGcN1gQElE6a8-ORn=XWhZAlIjyvqyIY438GZGmUy4dusH265VNrfaCCv0bjL3ATlHQVifhccBCaHKiK2Hy38QdWO6-_TbyaLNQH0B-JtDVfC6ojVHYoh55B8z2V14MMDhuHTT6kH80VD7ToeJ9bIlC2hLdMyxQ71YIrRzAnulc-rHE2eAAMT_=9Zbb9nhX3xcva=AI3ByU6OEjpTuw5Awud70Fkp9lz4J1cqQHCSNH5WZMVDvJy-p83=BN_uT8G2cb=5iA6lTYf0nyIcI58JJwSBpRn6F=cEeVjdTj6gEpQOsqe4gKOhGgINEDy__vyK1y0Vunh7ZDWpXb9UiOrZhnYmyy-thCxwiKcoQndUMpLoKyqdH_LkX5Ac=7CEKLHQeSZr08vrzEljtWEx2AytHmBh5TmJxD3QgOzLbXRD8RkI1-yGeWMBHSdiDZY6kECclYgb47y8liTRzg=cb2KoG8zho4Un3=l3-JXcXugvrLS_WbIRSzH4h5-=jZcfrknbwqJJFuWbQpsEfhF_J3yec0JlUtBEDdZOzn5ihQfD2Qi788kQdFSiTvNGK3c-hMoZBF3GGJSyDJneU0-L24fSJXIhyY7KvWq_jhettJl7L9mZN32RmXWoG7vYU34J99Th-AGu91oFsoD0nLLx7HbtzSujf-0VrM1=c7MrBU7Df4gGMsT3CMjIWmW2-M5UmEzWJ9RZgA-1tGCyIdNI-g_NJrnGMO=pmbUDRQN8HFIUC3tZL5rwHxdSlnnmif9Zctku4O3Hpahwv1JEyCCKIH6y_VDcTf19uMeHFqB9uu-Www79m4vYnf_Y1U9rWEDowUzla3E_0dXDWBU7i-Sz5QoJb4cKJTTMbghqVszQvWjrlYLOpOgF4OlHgQpmdr=Dc8haAqsBxAd8Yeq5ug_olC=gZb2i7wMOAAK0uz=2admSwSg_EcxZk56-kf6G5245itXd-T6sfJiaG3neI=vYu_Ekpg7IyFhGppbYOVKwzIMeTJlAnUyO--6JQzV-yikwuYcM-1xETVwnyHMmOWSuVxXWTFT4oQW6_rN8pCnfSSR2VAAmzjvNs00vbCbzwTTKZLg52Zoer9cq2opCh6yHBekJdO10B0O31vzbqM_xi=eBF1r_wTEu8uSMg5Nbqjbgcv9smXHFn2RQhRqxm496X5WC9K-rz2JrcWmeLo9kn8DEHx8KsAwHnzJU6vuAbSFkMDi4kAbw0MeKjIHXMzKGpfrvNCsV3rs74NjSiarFAYXwiKi04-9TUpG0RuaOipWWo3p5z-m88wV1wMfpevfeKr779ItfyFzRVnMWLnVLXqAyzGLvUy9d=zuKF1WQt7GCltJbrXdffIj50cBa=LntaMN1SlarEui__Cg-3LrXBqMV6a_haQQ66v6H7vaYWxhJgmB6mT33MAA-kMOSRYGFKC2bYXUho9T-RhaOMmAQQbhMQ5=FIhkuEuqSVMmpVa8ZcQl-MFosZ-kbYRx-3VNiQNIRNykeT91ZrDHNxvNG-lNcZmhF7NFK65SN=oL7X9ERIn1WEG=6FNwM4ojiZ0gc9rsFbWbl2nCIM=bdI2baQXNsLCevHvU_yEE7yT7m4ypjYemmFiZ66kGkcG6tCjg1O4p76Xw8GrNpDnDiytMCbUOa-2xkEdJifKS64S3tg_Ta9MS53fn4gB-iqivDkYFO6G0NWk8aiBrqftcoBdvjDwsBotofpSIHh6OfkU69MkmGdSxwaHQ_I9q6Svg=BZErz6GHteb-2F=3=2ISwj8NDf37Q2GCMIEQ39_w8ga_ev7gG3sWv5u5ntawynUEKiYYXEk1e=yD_0iCnfOUM=xHXtCp2uBGGF9wJ1-CuorkgjiNja2ejKOiF64dyfY4n3WgCl-3qoR7j_Wca1MXNmSj6f8KVVe4FB=GJI1Oqp2KDmF64lvnFdeC9nUTGL2GvMZvzgoe25OVjwENYSJxemmAlNQVbRDcVGMuzIUVux3pxRVCo952Q_4DrQLH=2uGYp_7N2Vs7f3OQyKi-vKxWOSwcX62RWxf_FtAQmaCIjTq-_c370aV8oTM7rc3H5lBGqnsKYoZ=DneKa4lmKomwLBv=DDFLdcLn1N4Gk-r4rdNr5Ojw9kiy9zQmxNbFNeNsYRGN1tmSabKgA6qL03MpJJyhGlnkCjTR1Dkf3v5sMgKoYagQ8kC5yZ6NC6K8=dq3HUJKGeAlFfDV22rnkUq68jlsmHV4a6ivbbNnMl_DIjVZFaZL3YHut7n8it0a4nLf3GKAuYRJOFAoMZpBpF5nzicnD4M_3c-=MqDCXIHxTXG06ErEq8FaLRtqhLK4raW2E_ENH6-imRhY60BgYQZAD=MaYrqKmeycqSz7MuV5WbjloVhMt1Fs4dmCthKzf==3ae5U9NrC_BZxCqXyXKXFan7atfYg9NFWmA5Q1gbmT2milx1i_dSYDidNhSZVZ41cLSfS7Iak_HiUuhyw869KA4zn3pSnN-c86bdL-78M=SLrHRojJVq9ha=L9VJqBsdt_l3NRu2plLnzQe05zJzWqxoGru2xUNzdfAxCxbeEG4hvw11WiVHoA-Uuupsr0SBbx=XoMMoLah3yKBVYKNe9E0y=4H=45n-utJ0KxUhOGlhuRwaJy=d-pFQhh2e3KnoH2GR0KXG2QqCFamW68zhnXFUx8Lrso1=-eE4GBwcVQ=YrWWsuskYFTbn90iUSmtWnmYoQu=pmhx63BrQA2lUDeuNpAfhbaJSUql8dGloksJS9AOs6g6_CBrDwNEzCSgFMt_0sI3tqFnZWl6mBS_w1W=amR4g95Yv-hgJ1cV4JzZL_CoN6gDjH5LqWjgINVyGHgGXMbIwUOis-rCzcZJZN7CfW1rSgwI3to97jIlGRf-fi4zcSm01zasLggeCMCkLn1k8Cp2hw_qefKj_8or8KXo20YAOMb5JY1ewk6dY=QrdwjmjCM8dxwTxqYnGEDy0YsqQN0eSFk2fxiXhEigNw1kRr4Rk3Lbv5x-pRMyY7CrxLlJ31HjuBo-29G=anaGhn89sgErmeUYT_RfdX_iHvO1c7W_IIgyIafO4hy9OmWsBtACsc3hzWhUVq2fAaUmvTZoOSsutiDOS_z02aI4sFaHCT67Ks_Od2Jl2ljkDufHGbs0kgX_-2_VkV0QsBS9Je=n64Sq2Ks77aK=4lse2m99uXHpBkkuBIEMYFeBTM3a35fyl5X9o77tF7ue8nqddB=ezrHxRri3a2qlFOW7e=n6Z6jso_7ILLWyjqDWASRiTE1pnvU6xyL-3LKhoEy_Ldcmc4zqZ5J=ZwvRyhQ6OmAQolG11uBiRyjyISvd9qHk3bvfc3=5JAep3aG8pWstO78qdqejS6-qW-T5a4qhb4jY0ne5Zbp_uZACjfVrazNbgRZU39e71Q4jj3FzSOZxNUexBu4Dln7E2uWaEr_zzf1wGwyvx94W69D4WCgr0892m6Z4f5lIai5qKumhcL0zzsLkf6R3S9MdIlZNvkIHlRvpn_IZRs_436mMbkR3JJ-KZdUzvKS011es3LTlrWZtWQZp2MCn0=_=c4qR_a26D2wiF6biEGh1TgqMOg-Y4zWdkvq_515wr4eMUIXe52da=LHpEjzCOGvV4Ta3Em1oLThfCUNAVsY=vdkuFn836SeOsEdX=rBImcYW8240HUztbvKVF5deHHImaT3hWyE0OWg4u8-qE59dEz6J1A3sQYvn9t2HgmThYGAwGO7vLdKe5iaFVjfxwmXc4Vz5y-AVmoEMZWTpoM06EN2rSzlnh6aRcu_m7O4_lTF=gdFcWZh-lg8hQVFLFLUFEBtfuyghF4wyLxtNvx6sqAMQFCV8dHnOM94dLXg58H69rgCUScxTErfqkGeqhxH--BD-ON0LAlUeS4yXS7Tp-mzzdISJjMafC3L0zjB7yI2-z7aMnpyHChtAcRlwY0FEqMvMiW18R243vt0Sgel1C006hp85Zf=iX4jw97Wu1XWj-e7ghfhvZKzhZuuu7SNOrUScOD0QWYuADiuk-baRTEjXWY4GT=AY94D2GABiNpS_AiBt6IpyGt3-fALmDU-gdytaMnwZtOg=JwwamJDewFNmCt0uDKdAQvymuQkH4qLyUQAcwecRjig9bwch7NKLqJvJStrq38ET45dlV0mYU4jie7S4ZbxyzBmFVc6b2NRzXtgrvalUNmjQ8ENkWTDY9k0EaFJpUv2KhUd34d3ifOcXO-SNOmplBtYrahXbTNmWt4oR88UIlasw39Qlivun1oJyzU=wlD30fSzB5sLXIy-5lS6cF8rZIRCJqVSh6T=7mO_7ZMXHGqvJ=xHSqzyTn-e3qSmKgZ-=GxcAhhZxvvKF_K9xURhsg6QNhikX8H6TKRV1p5Ut=GiiTLfepgTIQEqrJGxpXi2OH3EqkO1t8ilEY2AecV_1Vf3ml6DSTcY1gN_=FGvQNZN08l7sxj2y294rSVXQsayJn_3s5IUiW=LyXVVkzQJ12Lxa7dGg8BkqlFFMo8cUAzlcCf441ONn6_-mmetOX5gIuBOb91ziqZMgevv5Xt3-0wmAsQghrIWrsq922pqrE55yvh3WEaZdd3j37drQyZ-ZMDCZq2BioYrJ9hypXywTHJMgDl9NZo23GzxEjbk4sf=ZuNFkTMGQ=bqGB8-072X=7=WvZDGUzQ=HluIjF3Nwa_ZEjH7N13h2FvpEsp0iBF4TQXZhZGxFqcHOOhys=iODTEnUZosYFxZVa91KtSJvNUR0EiVjaT5ALh-8uyyn5d2ueCXll2RswpZXMljBWzFer_KvWGwSYGpjzd5eRh=XTLisCak1b4YiC6wFRKWSpbt4ljG3aXb5w1VxdvDNL4_eHe=CZkjhMeccmK6-LkrWc9qbAJI3b9MMo7cV=pFlg0I3GxCVbMUW3W4d8UoLHR4s9-ZfJH=XGlegDpJIsOB1ufB=-B2ec-nahzNef4ypvpX5nnYETbkRxTdU0qVKHyibYFDdENRQRwDFcl0No3bKrppB_ryqa4JY3BX1jYwSOFq64N-ShBE2GKXG49uLRRbMuzWwgOSe=5TWAeatLcQNY--Mk1o8NbztNjGRkOFMmBVVSb8aKIo7UQrDo108HydvT6k8EvRFG1qozoOtbbbc_nUnhcHHEgFJyD0OlAl3-=KD87n12ZcmasOOrtQOC9fU18NKuR-YSTaMg0q_NTaoE_QIlbLHc0c8LWL7Jx6--jdFvz3Az7MHtmdGOBXC-hRhOAGdUTyQei9NZ-waZ_U4BWsUXvml9D-NAqjkQHi0BclTtb0=551SuBegA05TJZpVE0gdrN=4N12QaoVZenbxZQMoRRLlnZXgqTI68Fo8htZ4J5KGfN=Y2Figizft-BrXDW0lxOQZTyazm-VJK-foBfh1nhqinnCTLRv=-bgG3w0ArS3K3IrwfowxsJFvgx-L46uc' \
  -H 'x-nyupe9cs-b: -h0jed2' \
  -H 'x-nyupe9cs-c: AKBk2XyFAQAAPmNF0fQdbSBmdKQ-_5yCMWOjQzlNxgQgUkH3JRWbS7UIOvhZ' \
  -H 'x-nyupe9cs-d: ABaChIjBDKGNgUGAQZIQhISi0eIAtJmBDgAVm0u1CDr4Wf_____JSxVAAGdEhsdmPyzc6FCbceir8Yk' \
  -H 'x-nyupe9cs-f: A2Ua2nyFAQAA11GAJYUOdzidk52WNQBGz3oxB5AErK0g-qpYZlY7waCzLoCGAYp5HuCucgBSwH8AAEB3AAAAAA==' \
  -H 'x-nyupe9cs-z: q' \
  --data-raw '{"header_request":{"version":"0.5","request_type":"PRICECATALOG"},"sender":{"client":"WUCOM","channel":"WWEB","funds_in":"EB","curr_iso3":"BRL","cty_iso2_ext":"BR","send_amount":"100.00"},"receiver":{"curr_iso3":"USD","cty_iso2_ext":"US","cty_iso2":"US"}}' \
  --compressed \
  --progress-bar | grep -o '"fx_rate":[[:digit:]]....' | tr -d 'fx_rate:' | tr -d '"' | {

  read WUCURRENCYVALUE

  if test -z "$WUCURRENCYVALUE"; then
    echo "Current currency ($WUCURRENCYVALUE) value is missing, message was not sent and data procedures were not triggered."
    exit 111
  else
    echo "Sending message to target $TARGET"

    ### Storage
    if [[ ! -e "src/databases/$TARGET_CURRENCY.csv" ]]; then
      touch "src/databases/$TARGET_CURRENCY.csv"
      echo "BASE_BRL;PRICE_$TARGET_CURRENCY;DATE" >>"src/databases/$TARGET_CURRENCY.csv"
    fi

    echo "1 BRL; $WUCURRENCYVALUE; $(date "+%d-%m-%Y %T")" >>"src/databases/$TARGET_CURRENCY.csv"
    ### Storage

    curl "ntfy.sh/$TARGET" \
      -H "X-Title: $MESSAGE_TITLE" \
      -H "X-Priority: 5" \
      -H "Actions: view, Ir para a Western Union, https://www.westernunion.com/br/en/home.html" \
      -d "[$TARGET] 1 BRL = $WUCURRENCYVALUE $TARGET_CURRENCY" \
      --progress-bar

    # Data Analysis
    echo "Sending data to data scripts with $TARGET_CURRENCY parameter"
    python3 -u "src/data_scripts/plot_csv_charts.py" "BRL_$TARGET_CURRENCY" "$TARGET_CURRENCY"
    # Data Analysis
  fi
}

exit 0
